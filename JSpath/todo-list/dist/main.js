(()=>{"use strict";class t{constructor(t){this.name=t,this.todos=[]}addTodo(t){this.todos.push(t)}removeTodo(t){this.todos.splice(t,1)}getTodos(){return this.todos}}class e{constructor(t,e,o,n){this.title=t,this.description=e,this.dueDate=o,this.priority=n,this.complete=!1}toggleComplete(){this.complete=!this.complete}}let o=[],n=0;const d=function(){const t=localStorage.getItem("todo-data");return t?JSON.parse(t):null}();function c(){!function(t,e,o){const n=document.getElementById("project-list");n.innerHTML="",t.forEach(((t,d)=>{const c=document.createElement("li");c.textContent=t.name,d===e&&(c.style.fontWeight="bold"),c.addEventListener("click",(()=>o(d))),n.appendChild(c)})),document.getElementById("current-project-name").textContent=t[e].name}(o,n,i),function(t,e,o){const n=document.getElementById("todo-list");n.innerHTML="",t.getTodos().forEach(((t,d)=>{const c=document.createElement("li");c.classList.add("todo"),t.complete&&c.classList.add("completed");const i=document.createElement("span");i.textContent=`${t.title} (${t.dueDate})`,i.classList.add(`priority-${t.priority}`),c.appendChild(i);const l=document.createElement("button");l.textContent="âœ“",l.addEventListener("click",(()=>e(d))),c.appendChild(l);const s=document.createElement("button");s.textContent="ðŸ—‘",s.addEventListener("click",(()=>o(d))),c.appendChild(s),n.appendChild(c)}))}(o[n],s,l),function(t){localStorage.setItem("todo-data",JSON.stringify(t))}(o)}function i(t){n=t,c()}function l(t){o[n].removeTodo(t),c()}function s(t){o[n].todos[t].toggleComplete(),c()}d?o=d.map((o=>{const n=new t(o.name);return o.todos.forEach((t=>{const o=new e(t.title,t.description,t.dueDate,t.priority);o.complete=t.complete,n.addTodo(o)})),n})):o.push(new t("Default")),document.getElementById("add-project").addEventListener("click",(()=>{var e;(e=document.getElementById("new-project-name").value).trim()&&(o.push(new t(e)),c()),document.getElementById("new-project-name").value=""})),document.getElementById("add-todo").addEventListener("click",(()=>{!function(t,d,i,l){if(!t.trim())return;const s=new e(t,d,i,l);o[n].addTodo(s),c()}(document.getElementById("todo-title").value,document.getElementById("todo-description").value,document.getElementById("todo-due-date").value,document.getElementById("todo-priority").value),document.getElementById("todo-title").value="",document.getElementById("todo-description").value="",document.getElementById("todo-due-date").value=""})),c()})();